import React, {useState} from "react";
import {useToasts} from 'react-toast-notifications'
import {Redirect} from "react-router-dom";

import Layout from 'conteiners/layout'
import useFetch from 'hooks/useFetch'
/**
 * Страница О Нас с возможностью отправить сообщение
*/
const AboutUs = () => {
    const [name, setName] = useState('');
    const [email, setEmail] = useState('');
    const [text, setText] = useState('');
    const apiUrl = '/rest/products/message'
    const [{response}, doFetch] = useFetch(apiUrl)
    const { addToast } = useToasts()
    const [count, setCount] = useState(0)

    const handleSubmit = event => {
        event.preventDefault()
        setCount(count + 1)
        if(count !== 1){
            return
        }
        doFetch({
            method: 'post',
            data: {
                name, email, text
            }
        })
    }
    if(response){
        addToast("Ваше сообщение отправленно!", {
            appearance: 'success',
            autoDismiss: true,})
       return <Redirect to='/'/>
    }

    return (
        <Layout>
            <div className="container">
                <div className="contact about_simple">
                    <div className="row">
                        <div className="col-md-auto">
                            <h2 className="about-title">Информация о нашем Магазине</h2>
                            <p>Наша история начинается в 1996 году. С самого начала наша компания занимается доставкой природной питьевой воды и нашим приоритетом всегда являляется качество. Мы выбираем только проверенных поставщиков и скважины расположенные только в экологически чистых районах. Поэтому Вы никогда не найдете у нас в продаже воду из Москвы или Московской области. Вы можете быть уверены в том, что вода, которую вам привезут домой или в офис, отвечает не только качеству по ГОСТу, но и проверена лично нами.
                                За время существования компании "Заповедник", мы работали с разными производителями и все это время мечтали воплотить в жизнь свою идею. Заниматься наконец-то своим продуктом. Благодаря богатому опыту общения со многими производителями воды, мы знаем каких ошибок нужно избегать, а на что обратить особое внимание при добыче и розливе воды. Поэтому с большим удовольствием предлагаем Вам познакомится с прекрасной водой марки AQUA ONE.
                                В месте добычи воды AQUA ONE отсутствуют промышленные предприятия, и, как следствие, благоприятная экологическая ситуация. Основным достоинством нашей скважины является то, что эксплуатируемый водоносный горизонт имеет хорошую степень защищенности. Кровля его залегает на глубине около 123 метров от поверхности земли. От проникновения поверхностных загрязнений водоносный слой надежно защищен 115-метровым песчано-глинистой толщей пород четвертичного, нижнемелового и верхнеюрского возраста.
                                Производство питьевой воды «AQUA ONE» начато в 2016 году с использованием всех новейших разработок специалистов России, США и Германии в этой области.
                                Водоподготовка производится на самом современном оборудовании производства компании ECOWATER SYSTEMS (США) и HONEYWELL (США), обеспечивающим многоступенчатую очистку.
                                Все операции по разливу воды выполняются автоматически, без контакта с руками человека. Это гарантирует высочайшее качество питьевой воды.
                                Состав воды «AQUA ONE» полностью соответствует международным стандартам Всемирной организации здравоохранения, требованиям российских санитарных служб (САНПиН) и ГОСТ Р. Качество нашей воды удостоверено свидетельствами и санитарно-эпидемиологическими заключениями Роспотребнадзора, сертификатами соответствия Госстандарта России.
                                <br/>
                                Вот что о Кашинской воде пишут в сети Интернет  <a target="_blank" href="https://ru.wikipedia.org/wiki/%D0%9A%D0%B0%D1%88%D0%B8%D0%BD%D1%81%D0%BA%D0%B8%D0%B5_%D0%BC%D0%B8%D0%BD%D0%B5%D1%80%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%B2%D0%BE%D0%B4%D1%8B">Кашинская вода в Википедии</a>
                                <br/>
                                Если у Вас появились вопросы, напишите нам! Мы ответим в ближайшее время!</p>
                        </div>
                    </div>
                    <form
                        className="comment-form contact-form"
                        onSubmit={handleSubmit}
                    >
                        <div className="form-group">
                            <div className="row">
                                <div className="col-md-6 col-xs-12">
                                    <label>Имя *</label>
                                    <input
                                        type="text"
                                        name="first_name"
                                        className="form-control"
                                        value={name}
                                        onChange={e => setName(e.target.value)}
                                    />
                                </div>
                                <div className="col-md-6 col-xs-12">
                                    <label>Email *</label>
                                    <input
                                        type="email"
                                        name="last_name"
                                        className="form-control"
                                        value={email}
                                        onChange={e => setEmail(e.target.value)}/>
                                </div>
                            </div>
                        </div>
                        <div className="form-group">
                            <div className="row">
                                <div className="col-md-12">
                                    <label>Сообщение</label>
                                    <textarea
                                        name="note"
                                        id="message"
                                        tabIndex="2"
                                        className="form-control"
                                        value={text}
                                        onChange={e => setText(e.target.value)}
                                    ></textarea>
                                </div>
                            </div>
                        </div>
                        <button type="submit" className="btn btn-submit ver2">Отправить</button>
                    </form>
                </div>
            </div>
        </Layout>
    )

}

export default AboutUs